# Project Team Configuration Template
# 프로젝트 팀 구성 설정 템플릿
#
# 설명:
#   - 프로젝트의 전체 팀 구조를 정의하는 마스터 설정 파일
#   - 프로젝트 레벨 에이전트 + 도메인 레벨 팀 구성
#   - Hook 시스템, 위험 영역, 표준 정의 등을 포함
#
# 사용 방법:
#   1. 이 파일을 프로젝트 루트의 .claude/ 디렉토리에 복사
#   2. 프로젝트 정보와 도메인을 입력
#   3. 각 도메인별로 Part Leader 정보를 추가
#   4. Hook 설정을 조정하고 위험 영역 정의
#
# 예시:
#   cp templates/project-team.yaml my-project/.claude/project-team.yaml
#   # 그 후 my-project 정보로 수정

---
# ============================================================================
# 1. 프로젝트 기본 정보
# ============================================================================
version: "1.0"

project:
  # 프로젝트 이름
  name: "{{ PROJECT_NAME }}"

  # 프로젝트 타입: ecommerce | saas | api | mobile | data | system | etc
  type: "{{ PROJECT_TYPE }}"

  # 프로젝트 설명
  description: "{{ PROJECT_DESCRIPTION }}"

  # 프로젝트 관리자
  owner: "{{ OWNER_NAME }}"

  # 프로젝트 시작일
  start_date: "{{ START_DATE }}"

  # 핵심 기술 스택 (쉼표로 구분)
  tech_stack:
    backend: "{{ BACKEND_FRAMEWORK }}"       # FastAPI, Spring Boot, Django, etc
    frontend: "{{ FRONTEND_FRAMEWORK }}"     # React, Vue, Angular, etc
    database: "{{ DATABASE }}"               # PostgreSQL, MongoDB, MySQL, etc
    infrastructure: "{{ INFRASTRUCTURE }}"  # Docker, Kubernetes, AWS, etc
    messaging: "{{ MESSAGING }}"             # RabbitMQ, Kafka, Redis, etc

# ============================================================================
# 2. 프로젝트 레벨 에이전트 (전체 관장)
# ============================================================================
agents:
  # 프로젝트 매니저: 전체 조율, 도메인 간 조정
  project-manager:
    enabled: true
    description: "프로젝트 전체 조율, 도메인 간 조정, 일정 및 리소스 관리"
    model: "opus"
    permissions:
      - read_all_domains
      - write_project_config
      - approve_timeline
      - resolve_conflicts
    responsibilities:
      - 프로젝트 요청 접수 및 분석
      - 도메인별 작업 분배
      - 도메인 간 조정 및 의사결정
      - 일정 및 리소스 관리
      - 이해관계자 커뮤니케이션

  # Chief Architect: 전체 기술 표준, 아키텍처 VETO
  chief-architect:
    enabled: true
    description: "전체 아키텍처, 기술 표준, 아키텍처 VETO"
    model: "opus"
    permissions:
      - read_all_domains
      - write_standards
      - veto_architecture
      - approve_tech_decisions
    responsibilities:
      - 전체 시스템 아키텍처 설계
      - 기술 표준 및 Best Practices 정의
      - 도메인 간 아키텍처 호환성 검증
      - 주요 기술 의사결정 승인/거부
      - 마이그레이션 전략 수립

  # Chief Designer: 디자인 시스템, 일관성 감시
  chief-designer:
    enabled: true
    description: "디자인 시스템, 디자인 가이드, 일관성 감시"
    model: "opus"
    permissions:
      - read_all_domains
      - write_design_system
      - review_ui_designs
    responsibilities:
      - 전사 디자인 시스템 정의
      - UI/UX 가이드라인 수립
      - 도메인 간 디자인 일관성 감시
      - 디자인 검리 및 승인
      - 접근성(Accessibility) 표준 관리

  # QA Manager: 통합 테스트, 품질 게이트, 릴리스 승인
  qa-manager:
    enabled: true
    description: "통합 테스트, 품질 게이트, 릴리스 승인"
    model: "opus"
    permissions:
      - read_all_domains
      - approve_releases
      - define_quality_standards
      - veto_releases
    responsibilities:
      - 통합 테스트 계획 수립
      - 품질 게이트 정의 및 실행
      - 릴리스 조건 검증
      - 버그 심각도 판정 및 우선순위 지정
      - 성능 및 보안 기준 설정

  # DBA: 전체 DB 스키마, 데이터 표준
  dba:
    enabled: true
    description: "전체 DB 스키마, 데이터 표준, 마이그레이션"
    model: "opus"
    permissions:
      - read_all_domains
      - write_db_standards
      - approve_schema_changes
      - manage_migrations
    responsibilities:
      - 전체 데이터베이스 설계 및 표준화
      - 스키마 버전 관리
      - 마이그레이션 계획 및 실행
      - 데이터 무결성 검증
      - 성능 최적화 및 인덱싱 전략
      - 백업 및 복구 정책 수립

# ============================================================================
# 3. 도메인 정의 (도메인당 3명: PL, Designer, Developer)
# ============================================================================
domains:
  # 도메인 예시: user, product, order, payment, inventory, etc.
  #
  # 각 도메인은 다음 구성원을 가집니다:
  # - Part Leader (PL): 도메인 리더, 스펙 정의, 타 도메인 협의
  # - Domain Designer: 도메인 설계, 데이터 모델, API 설계
  # - Domain Developer: 개발/테스트 구현 (vibelab 에이전트)

  - name: "{{ DOMAIN_1_NAME }}"
    display_name: "{{ DOMAIN_1_DISPLAY_NAME }}"
    description: "{{ DOMAIN_1_DESCRIPTION }}"

    # 도메인 책임자 (Part Leader)
    lead: "{{ DOMAIN_1_PL_NAME }}"

    # 도메인 멤버
    team:
      - role: "part-leader"
        name: "{{ DOMAIN_1_PL_NAME }}"
        description: "도메인 리더, 스펙 정의, 타 도메인 협의"

      - role: "domain-designer"
        name: "{{ DOMAIN_1_DESIGNER_NAME }}"
        description: "도메인 설계, 데이터 모델, API 설계"

      - role: "domain-developer"
        name: "{{ DOMAIN_1_DEVELOPER_NAME }}"
        description: "개발/테스트 구현"

    # 의존하는 도메인 (도메인 간 의존성)
    dependencies:
      - "{{ DOMAIN_DEPENDENCY_1 }}"
      - "{{ DOMAIN_DEPENDENCY_2 }}"

    # 도메인이 사용하는 기술
    tech_stack:
      - "{{ TECH_1 }}"
      - "{{ TECH_2 }}"

    # 도메인 폴더 경로
    path: "src/domains/{{ DOMAIN_1_NAME }}"

    # 도메인 관련 리소스
    resources:
      api_contract: "contracts/interfaces/{{ DOMAIN_1_NAME }}-api.yaml"
      data_model: "docs/{{ DOMAIN_1_NAME }}/data-model.md"
      readme: "src/domains/{{ DOMAIN_1_NAME }}/README.md"

  # 추가 도메인들을 아래에 추가합니다...
  # - name: "domain-2"
  #   display_name: "..."
  #   ...

# ============================================================================
# 4. Hook 시스템 설정 (자동 통제)
# ============================================================================
hooks:
  # 권한 검증: 파일 수정 권한 확인
  permission-checker:
    enabled: true
    description: "파일 수정 권한 검증"
    strict: false
    config:
      # 프로젝트 레벨 파일은 해당 에이전트만 수정 가능
      protected_paths:
        - path: ".claude/project-team.yaml"
          write_permission: ["project-manager"]
        - path: ".claude/standards/"
          write_permission: ["chief-architect"]
        - path: "design-system/"
          write_permission: ["chief-designer"]

      # 도메인 폴더는 해당 Part Leader만 수정 가능 (API 변경)
      domain_paths:
        - pattern: "src/domains/{domain}/"
          write_permission: ["domain-developer"]
        - pattern: "contracts/interfaces/{domain}-api.yaml"
          write_permission: ["domain-designer", "part-leader"]

  # 표준 검증: 코딩 표준, 아키텍처 표준
  standards-validator:
    enabled: true
    description: "코딩/아키텍처 표준 검증"
    config:
      # 코딩 스타일 검증
      code_style:
        enabled: true
        linter: "{{ LINTER_TOOL }}"  # eslint, pylint, etc
        config: ".eslintrc.json"

      # 아키텍처 패턴 검증
      architecture:
        enabled: true
        patterns:
          - pattern: "src/domains/{domain}/"
            must_have:
              - "models/"
              - "services/"
              - "api.py"  # or routes.ts, handlers.js, etc
              - "README.md"

  # 디자인 검증: 디자인 시스템 일관성
  design-validator:
    enabled: true
    description: "디자인 시스템 일관성 검증"
    config:
      # 디자인 토큰 검증
      design_tokens:
        enabled: true
        path: "design-system/tokens.json"

      # 컴포넌트 가이드라인
      components:
        enabled: true
        path: "design-system/components/"

  # 품질 게이트: Phase 완료 전 QA 검증
  quality-gate:
    enabled: true
    description: "Phase 완료 전 QA 검증"
    strict: false  # false면 경고, true면 차단
    config:
      # 테스트 커버리지 기준
      test_coverage:
        enabled: true
        minimum: 80
        excluded_paths: ["tests/", "docs/"]

      # 통합 테스트 필수
      integration_tests:
        enabled: true

      # 성능 기준
      performance:
        enabled: false  # Optional
        max_response_time_ms: 500

      # 보안 스캔
      security:
        enabled: true
        tool: "{{ SECURITY_SCAN_TOOL }}"  # bandit, OWASP, etc

  # 인터페이스 검증: 도메인 간 API 스펙 변경 감시
  interface-validator:
    enabled: true
    description: "도메인 간 API 스펙 변경 감시"
    config:
      # API 컨트랙트 검증
      contracts:
        path: "contracts/interfaces/"
        versioning: "semantic"  # Semantic Versioning

      # Breaking Changes 감지
      breaking_changes:
        enabled: true
        require_approval: true
        min_notice_days: 30

  # 크로스 도메인 알림: 스펙/디자인 변경 시 영향받는 도메인 알림
  cross-domain-notifier:
    enabled: true
    description: "스펙/디자인 변경 시 영향받는 도메인 알림"
    config:
      # 변경 감시 대상
      watch_paths:
        - "contracts/interfaces/"
        - "design-system/"

      # 알림 대상 결정 방식
      notification_strategy: "dependency"  # dependency | smart-analysis

# ============================================================================
# 5. 위험 영역 정의 (Risk Areas)
# ============================================================================
# 위험 영역은 특별한 주의와 감시가 필요한 코드 영역을 정의합니다.
# 이 영역의 변경에는 자동으로 더 엄격한 검증과 알림이 적용됩니다.

risk_areas:
  # 결제 관련 (CRITICAL)
  - pattern: "**/payment/**"
    level: CRITICAL
    description: "결제 시스템 - 금융 데이터 민감도 높음"
    required_approvals: ["chief-architect", "security-specialist"]
    required_tests: ["unit", "integration", "e2e"]
    security_checks: ["encryption", "pci-dss"]

  # 인증/권한 (CRITICAL)
  - pattern: "**/auth/**"
    level: CRITICAL
    description: "인증/권한 시스템 - 보안 민감도 높음"
    required_approvals: ["chief-architect", "security-specialist"]
    required_tests: ["unit", "integration", "security"]
    security_checks: ["oauth", "jwt", "xss", "csrf"]

  # 데이터베이스 마이그레이션 (HIGH)
  - pattern: "migrations/**"
    level: HIGH
    description: "DB 마이그레이션 - 데이터 손실 위험"
    required_approvals: ["dba"]
    required_tests: ["integration", "data_integrity"]

  # API 컨트랙트 (HIGH)
  - pattern: "contracts/interfaces/**"
    level: HIGH
    description: "도메인 간 API 계약 - Breaking Changes 위험"
    required_approvals: ["chief-architect"]
    required_notifications: "all_consumers"

  # 추가 위험 영역들...
  # - pattern: "**/security/**"
  #   level: HIGH
  #   ...

# ============================================================================
# 6. 표준 및 가이드라인
# ============================================================================
standards:
  # 코딩 표준
  code:
    language_guides:
      - "docs/standards/python-style.md"
      - "docs/standards/typescript-style.md"
      - "docs/standards/sql-style.md"

    naming_conventions:
      classes: "PascalCase"
      functions: "snake_case"
      constants: "UPPER_SNAKE_CASE"
      files: "snake_case"

  # 아키텍처 표준
  architecture:
    pattern: "{{ ARCHITECTURE_PATTERN }}"  # hexagonal, ddd, layered, etc
    layer_structure:
      - "models"
      - "services"
      - "repositories"
      - "api"

    documentation: "docs/standards/architecture.md"

  # 테스트 표준
  testing:
    coverage_minimum: 80
    types_required:
      - "unit"
      - "integration"
    test_location: "{{ TEST_LOCATION }}"  # tests/, __tests__/, etc
    documentation: "docs/standards/testing.md"

  # 문서 표준
  documentation:
    readme_required: true
    api_docs_required: true
    changelog_required: true
    documentation_path: "docs/"

  # 보안 표준
  security:
    authentication: "{{ AUTH_METHOD }}"  # oauth2, jwt, etc
    encryption: "{{ ENCRYPTION }}"  # AES-256, RSA, etc
    secret_management: "{{ SECRET_MANAGER }}"  # HashiCorp Vault, AWS Secrets Manager, etc
    documentation: "docs/standards/security.md"

# ============================================================================
# 7. 통신 및 협업 규칙
# ============================================================================
collaboration:
  # 도메인 간 변경 요청 프로세스
  change_request_process:
    - step: 1
      description: "요청서 제출 (requests/to-{domain}/ 디렉토리)"
    - step: 2
      description: "Part Leader 검토"
    - step: 3
      description: "영향도 분석 (interface-validator)"
    - step: 4
      description: "필요시 Chief Architect 승인"
    - step: 5
      description: "구현 및 테스트"
    - step: 6
      description: "배포"

  # 정기 회의
  meetings:
    - type: "Architecture Sync"
      frequency: "weekly"
      attendees: ["chief-architect", "all-part-leaders"]
      duration: "1 hour"

    - type: "Design Sync"
      frequency: "bi-weekly"
      attendees: ["chief-designer", "all-domain-designers"]
      duration: "1 hour"

    - type: "QA/Release Planning"
      frequency: "weekly"
      attendees: ["qa-manager", "all-part-leaders"]
      duration: "1 hour"

  # 문제 해결 에스컬레이션 프로세스
  escalation:
    - level: 1
      description: "도메인 간 협의 (Part Leaders)"
    - level: 2
      description: "Project Manager 중재"
    - level: 3
      description: "Chief Architect 최종 결정"

# ============================================================================
# 8. 모니터링 및 메트릭
# ============================================================================
monitoring:
  # 프로젝트 메트릭
  metrics:
    - name: "Code Coverage"
      target: 80
      frequency: "daily"

    - name: "Build Success Rate"
      target: 95
      frequency: "daily"

    - name: "Test Execution Time"
      target: "< 10 minutes"
      frequency: "daily"

    - name: "API Response Time (p95)"
      target: "< 500ms"
      frequency: "hourly"

    - name: "Error Rate"
      target: "< 0.1%"
      frequency: "hourly"

  # 대시보드
  dashboards:
    - name: "Project Overview"
      url: "{{ DASHBOARD_URL }}"

    - name: "Quality Metrics"
      url: "{{ METRICS_DASHBOARD_URL }}"

# ============================================================================
# 9. 환경 및 배포 설정
# ============================================================================
environments:
  development:
    description: "개발 환경"
    auto_deploy: false
    requires_approval: false

  staging:
    description: "스테이징 환경"
    auto_deploy: false
    requires_approval: true
    approver: "qa-manager"

  production:
    description: "운영 환경"
    auto_deploy: false
    requires_approval: true
    approver: "project-manager"
    qa_verification: true

# ============================================================================
# 10. 참고 자료 및 링크
# ============================================================================
references:
  project_wiki: "{{ PROJECT_WIKI_URL }}"
  design_system: "design-system/README.md"
  api_documentation: "docs/api/README.md"
  architecture_guide: "docs/architecture.md"
  standards: "docs/standards/"
  onboarding: "docs/onboarding/README.md"
